<!--
 * Andrey Pudov Official Website
 *
 * The MIT License
 *
 * Copyright 2011-2015 Andrey Pudov.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
-->
<!DOCTYPE html>
<html>
  <head>
    <title>Andrey Pudov - Objective-C Programming in Linux</title>
    
    <meta charset='utf-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    
    <meta name='viewport'    content='width=device-width, initial-scale=1.0' />
    <meta name='description' content='Official Andrey Pudov website featuring Andrey Pudov news, photo albums and more.' />
    <meta name='author'      content='Andrey Pudov' />
    
    <!-- bootstrap core style sheet -->
    <link href='../libraries/bootstrap/css/bootstrap.css' rel='stylesheet' />

    <!-- web page specific styles declaration -->
    
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js'></script>
      <script src='https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js'></script>
    <![endif]-->

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
      (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
        try {
          w.yaCounter22906810 = new Ya.Metrika({id:22906810,
            webvisor:true,
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true});
        } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
      })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="//mc.yandex.ru/watch/22906810" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
  </head>
    <body>
      <div id='page'>
        <div id='header'>
          <div class='navbar-wrapper'>
    <div class='container'>
        <div class='navbar navbar-static-top' role='navigation'>
            <div class='container'>
                <div class='navbar-header'>
                    <button type='button' class='navbar-toggle' data-toggle='collapse' data-target='.navbar-collapse'>
                        <span class='sr-only'>Toggle navigation</span>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                    </button>
                    <a href='../index.html' class='navbar-brand'>Andrey Pudov</a>
                </div>
                <div class='navbar-collapse collapse'>
                    <ul class='nav navbar-nav'>
                        <li class='active'><a href='../albums.html'>Albums</a></li>
	                    <li><a href='../contents.html'>Contents</a></li>
	                    <li><a href='../resume.html'>Resume</a></li>
	                    <li><a href='../contact.html'>Contact</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

        </div>
        <div id='content'>
          <div class='container'>
          <div class='page-header'>
            <h1>Objective-C Programming in Linux<small><em>Thursday, May 5, 2011</em></small></h1>
          </div>

          <p>The basics of Objective-C are supported by the GNU compiler collection. In order to utilize the full power of Objective-C together with the Cocoa openStep environments on Linux, it is necessary to install gcc, the gcc Objective-C support package and the GNUstep environment.</p>

          <p>The gcc Objective-C support can be installed on Linux simply by installing the gcc-objc package which is available with all Linux distributions. There are, however, two different paths to installing GNUstep. On those Linux distributions for which pre-built GNUstep packages are provided this is simply a matter of issuing the appropriate command to install GNUstep. On Linux distributions for which pre-built packages are not available, the process involves downloading the GNUstep source code and then building and installing the packages manually.</p>

          <h2>Installing GNUstep on Red Hat/Fedora</h2>

          <pre style="background:#fff;color:#000;border:0;">$ sudo yum install gcc gcc-objc gnustep-examples gnustep-back gnustep-base gnustep-base-devel gnustep-base-doc gnustep-filesystem gnustep-gui gnustep-gui-devel gnustep-gui-doc gnustep-gui-libs gnustep-make gnustep-make-doc
          </pre>

          <h2>Finding Fibonacci Numbers</h2>

          <p>In mathematics, the Fibonacci numbers are the numbers in the following integer sequence:</p>

          <p><strong>0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, ...</strong></p>

          <p>By definition, the first two Fibonacci numbers are 0 and 1, and each subsequent number is the sum of the previous two.</p>

          <p>In mathematical terms, the sequence Fn of Fibonacci numbers is defined by the recurrence relation</p>

          <p><img src="../images/pages/PAGE_Objective-C_Programing_1.jpg" class="img-responsive"></p>

          <p>with seed values</p>
            
          <p><img src="../images/pages/PAGE_Objective-C_Programing_2.jpg" class="img-responsive"></p>

          <p>The Fibonacci sequence is named after Leonardo of Pisa, who was known as Fibonacci. Fibonacci's 1202 book Liber Abaci introduced the sequence to Western European mathematics, although the sequence had been described earlier in Indian mathematics. (By modern convention, the sequence begins with F0=0. The Liber Abaci began the sequence with F1 = 1, omitting the initial 0, and the sequence is still written this way by some.)</p>

          <p>Fibonacci numbers are closely related to Lucas numbers in that the are a complementary pair of Lucas sequences. They are intimately connected with the Golden ratio, for example the closest rational approximations to the ratio are 2/1, 3/2, 5/3, 8/5, ... . Applications include computer algorithms such as the Fibonacci search technique and the Fibonacci heap data structure, and graphs called Fibonacci cubes used for interconnecting parallel and distributed systems. They also appear in biological settings, such as branching in trees, arrangement of leaves on a stem, the fruit spouts of a pineapple, the flowering of artichoke, an uncurling fern and the arrangement of a pine cone.</p>

          <h2>Source code</h2>

          <p>main.m</p>

          <pre style="background:#fff;color:#000;border:0;"><span style="color:#06f;font-style:italic">/*
 * Copyright (C) 2011 by Andrey Pudov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */</span>
<span style="color:#1a921c">#<span style="color:#0c450d;font-weight:700">import</span> <span style="color:#036a07">&lt;stdio.h></span></span>
<span style="color:#1a921c">#<span style="color:#0c450d;font-weight:700">import</span> <span style="color:#036a07">&lt;stdlib.h></span></span>
<span style="color:#1a921c">#<span style="color:#0c450d;font-weight:700">import</span> <span style="color:#036a07">&lt;Foundation/Foundation.h></span></span>
<span style="color:#1a921c">#<span style="color:#0c450d;font-weight:700">import</span> <span style="color:#036a07">"Fibonacci.h"</span></span>
<span style="color:#00f;font-weight:700">int</span> <span style="color:#0000a2;font-weight:700">main</span>(int argc, const char **argv) {
  /*
   * The NSAutoreleasePool class is used to support Cocoaâ€™s reference-counted
   * memory management system. An autorelease pool stores objects that are sent
   * a release message when the pool itself is drained.
   */
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  /* parsing command-line arguments */
  if (argc != 2) {
    /* print argv[0] assuming it is the program name */
    printf("Usage: %s index\n", *argv);
    return (EXIT_SUCCESS);
  }
  Fibonacci *fibonacci = [[Fibonacci alloc] init];
  int index = atoi(*(argv + 1));
  if ((index > 0) &amp;&amp; (index &lt; 94)) {
    unsigned long t = [fibonacci getFibonacci2: index];
    printf("%lu\n", t);
  } else if ((index > 93) &amp;&amp; (index &lt; 791)) {
    NSLog(@"%@", [fibonacci getFibonacci4: index]);
  } else {
    printf("Invalid argument: parameter index is out of range {1...790}\n");
  }
 
  [fibonacci release];
  [pool drain];
  return (EXIT_SUCCESS);
}
          </pre>

          <p>Fibonacci.h</p>

          <pre style="background:#fff;color:#000;border:0;"><span style="color:#1a921c">#<span style="color:#0c450d;font-weight:700">import</span> <span style="color:#036a07">&lt;Foundation/Foundation.h></span></span>
<span style="color:#1a921c">#<span style="color:#0c450d;font-weight:700">import</span> <span style="color:#036a07">&lt;Foundation/NSObject.h></span></span>
<span style="color:#00f;font-weight:700">@interface</span> <span style="text-decoration:underline">Fibonacci</span>: <span style="font-style:italic">NSObject</span> {
  /*
   * establish a memoization "cache", which stores previously computed
   * fibonacci numbers
   */
  NSMutableArray *fibCache;
}
-(unsigned long) <span style="color:#0000a2;font-weight:700">getFibonacci</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span>;
-(unsigned long) <span style="color:#0000a2;font-weight:700">getFibonacci2</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span>;
-(unsigned long) <span style="color:#0000a2;font-weight:700">getFibonacci3</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span>;
-(NSDecimalNumber*) <span style="color:#0000a2;font-weight:700">getFibonacci4</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span>;
<span style="color:#00f;font-weight:700">@end</span>
          </pre>

          <p>Fibonacci.m</p>

          <pre style="background:#fff;color:#000;border:0;"><span style="color:#1a921c">#<span style="color:#0c450d;font-weight:700">import</span> <span style="color:#036a07">"Fibonacci.h"</span></span>
<span style="color:#00f;font-weight:700">@implementation</span> <span style="text-decoration:underline">Fibonacci</span>
/* constructor */
-(id) <span style="color:#0000a2;font-weight:700">init</span> {
  if (self = [super init]) {
    /* initialization code */
    fibCache = [[NSMutableArray alloc] init];
    [fibCache addObject:[[[NSDecimalNumber alloc] initWithInt:0] autorelease]];
    [fibCache addObject:[[[NSDecimalNumber alloc] initWithInt:1] autorelease]];
  }
 
  return <span style="color:#318495">self</span>;
}
/* destructor */
- (void)<span style="color:#0000a2;font-weight:700">dealloc</span> {
  /* release owned objects */
  [fibCache release];
  [super dealloc];
}
/* simple routine uses recursion to calculate Fibonacci numbers */
-(unsigned long) <span style="color:#0000a2;font-weight:700">getFibonacci</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span> {
  if (n &lt; 2) {
    return n;
  } else {
    return [<span style="color:#318495">self</span> getFibonacci: n - 1] + [<span style="color:#318495">self</span> getFibonacci: n - 2];
  }
}
/**
 * Although it is based directly on the definition of a Fibonacci number,
 * the recursive Fibonacci algorithm is extremely expensive, requiring
 * time O(2^n). It also performs a huge amount of redundant work because it
 * computes many Fibonnaci values from scratch many times. A simple
 * linear-time iterative approach which calculates each value of getFibonacci2
 * successively can avoid these issues:
 */
-(unsigned long) <span style="color:#0000a2;font-weight:700">getFibonacci2</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span> {
  unsigned long prev1 = 0;
  unsigned long prev2 = 1;
  for (int i = 0; i &lt; n; ++i) {
    unsigned long savePrev1 = prev1;
    prev1 = prev2;
    prev2 = savePrev1 + prev2;
  }
  return prev1;
}
/*
 * The recursive implementation given above is elegant and close to the
 * mathematical definition, it is not very practical. Calculating the nth
 * fibonacci number requires calculating two smaller fibonacci numbers, which
 * in turn require two additional recursive calls each, and so on until all
 * branches reach 1. The iterative solution is faster, but still repeats a lot
 * of calculations when computing successive fibonacci numbers. To remedy this,
 * we can employ memoization to cache previous computations.
 */
/* the recursive implementation for small numbers {1..93} */
-(unsigned long) <span style="color:#0000a2;font-weight:700">getFibonacci3</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span> {
  unsigned long *val = (unsigned long*) malloc(100 * sizeof(unsigned long));
  if (n &lt; 2) {
    return n;
  } else {
    val[0] = 1;
    val[1] = 1;
    for (int i =2; i &lt; n; ++i) {
      val[i] = val[i - 1] + val[i - 2];
    }
    return val[n - 1];
  }
}
/* the recursive implementation for big numbers {94..790} */
-(NSDecimalNumber*) <span style="color:#0000a2;font-weight:700">getFibonacci4</span><span style="color:#0000a2;font-weight:700">:</span> (int) <span style="font-style:italic">n</span> {
  /* memoized recursion */
  if (n >= [fibCache count]) {
    [fibCache addObject: [[self getFibonacci4: n - 1]
               decimalNumberByAdding: [self getFibonacci4: n - 2]]];
  }
  return [fibCache objectAtIndex: n];
}
<span style="color:#00f;font-weight:700">@end</span>
          </pre>

          <h2>Compiling</h2>

          <p>Objective-C code can be compiled using the GNU C compiler gcc. Objective-C interface files usually marked by the extension .h as in Fibonacci.h. Implementation files are usually marked by the extension .m as in Fibonacci.m. The implementation file should #import its corresponding interface file. The main program should also #import the interface files of all of the classes it uses.</p>

          <h3>Compiling by hand</h3>

          <p>The trivial way to compile the files and obtain an executable, is by running the command:</p>

          <pre style="background:#fff;color:#000;border:0;">gcc -Wno-import -std=c99 -lobjc -lgnustep-base -ldl -lm -fconstant-string-class=NSConstantString -o fibonacci main.m Fibonacci.m <span style="color:#00f;font-weight:700">&amp;&amp;</span> ./fibonacci
          </pre>

          <h3>Using a makefile to compile a program</h3>

          <p>In software development, make is a utility that automatically builds executable programs and libraries from source code by reading files called makefiles which specify how to derive the target program. Make can decide where to start through topological sorting.</p>

          <pre style="background:#fff;color:#000;border:0;"><span style="color:#06f;font-style:italic"># Makefile to build Fibonacci program</span>
<span style="color:#06f;font-style:italic"># --- macros</span>
<span style="color:#318495">CC      = gcc</span>
<span style="color:#318495">SOURCES = main.m Fibonacci.m</span>
<span style="color:#318495">OBJECTS = main.o Fibonacci.o</span>
<span style="color:#318495">CFLAGS  = -Wno-import -std=c99 -O2 -fconstant-string-class=NSConstantString</span>
<span style="color:#318495">LIBS    = -lobjc -lgnustep-base -ldl -lm</span>

<span style="color:#06f;font-style:italic"># --- targets</span>
<span style="color:#0000a2;font-weight:700">main:</span>   $(OBJECTS) 
    <span style="color:#318495">$(CC)</span> <span style="color:#318495">$(LIBS)</span> <span style="color:#318495">$(OBJECTS)</span> -o fibonacci

<span style="color:#0000a2;font-weight:700">Fibonacci.o:</span> Fibonacci.m Fibonacci.h
    <span style="color:#318495">$(CC)</span> <span style="color:#318495">$(CFLAGS)</span> -c Fibonacci.m
      
<span style="color:#0000a2;font-weight:700">main.o:</span> main.m
    <span style="color:#318495">$(CC)</span> <span style="color:#318495">$(CFLAGS)</span> -c main.m

<span style="color:#0000a2;font-weight:700">clean:</span>
    rm -rf *.o *~ fibonacci
          </pre>

          <p>Executing the program will result in output similar to the following:</p>

          <pre style="background:#fff;color:#000;border:0;">./fibonacci 66
27777890035288

./fibonacci 150
fibonacci[4085] 9.9692166771893033862144057602E30
</pre>
        </div>
        <div id='footer'>
          <div class='container'>
    <footer>
        <hr class='footer-divider' />

        <ul class='piped-links pull-right'>
            <li class='first piped-links-short'><a href='../resume.html'>About</a></li>
            <li class='first piped-links-long'><a href='../resume.html'>About Andrey Pudov</a></li>
            <li><a href='../contact.html'>Contact</a></li>
        </ul>

        <ul class='piped-links'>
            <p class='piped-links-long'>Copyright &#169; 2016 Andrey Pudov. All rights reserved.</p>
        </ul>

        <p class='piped-links-short'>&#169; 2016 Andrey Pudov. All rights reserved.</p>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src='../libraries/jquery/jquery-1.11.3.min.js'></script>
    <!-- <script src='../libraries/jquery/jquery.validate.min.js'></script> -->

    <!-- <script src='../libraries/bootstrap/js/bootstrap.min.js'></script> -->

    <script src='../libraries/bootstrap/js/collapse.js' ></script>
    <script src='../libraries/bootstrap/js/dropdown.js' ></script>
    <script src='../libraries/bootstrap/js/transition.js' ></script>

    <!-- web page specific scripts declaration -->
    

    <!-- common on init functions -->
    <script src='../scripts/init.js'></script>
</div>
                 
        </div>
      </div>
    </body>
</html>
