<!--
 * Andrey Pudov Official Website
 *
 * The MIT License
 *
 * Copyright 2011-2015 Andrey Pudov.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
-->
<!DOCTYPE html>
<html>
  <head>
    <title>Andrey Pudov - Hard drive and RAM disk Comparison Report</title>
    
    <meta charset='utf-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    
    <meta name='viewport'    content='width=device-width, initial-scale=1.0' />
    <meta name='description' content='Official Andrey Pudov website featuring Andrey Pudov news, photo albums and more.' />
    <meta name='author'      content='Andrey Pudov' />
    
    <!-- bootstrap core style sheet -->
    <link href='../libraries/bootstrap/css/bootstrap.css' rel='stylesheet' />

    <!-- web page specific styles declaration -->
    
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js'></script>
      <script src='https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js'></script>
    <![endif]-->

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
      (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
        try {
          w.yaCounter22906810 = new Ya.Metrika({id:22906810,
            webvisor:true,
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true});
        } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
      })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="//mc.yandex.ru/watch/22906810" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
  </head>
    <body>
      <div id='page'>
        <div id='header'>
          <div class='navbar-wrapper'>
    <div class='container'>
        <div class='navbar navbar-static-top' role='navigation'>
            <div class='container'>
                <div class='navbar-header'>
                    <button type='button' class='navbar-toggle' data-toggle='collapse' data-target='.navbar-collapse'>
                        <span class='sr-only'>Toggle navigation</span>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                    </button>
                    <a href='../index.html' class='navbar-brand'>Andrey Pudov</a>
                </div>
                <div class='navbar-collapse collapse'>
                    <ul class='nav navbar-nav'>
                        <li class='active'><a href='../albums.html'>Albums</a></li>
	                    <li><a href='../contents.html'>Contents</a></li>
	                    <li><a href='../resume.html'>Resume</a></li>
	                    <li><a href='../contact.html'>Contact</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

        </div>
        <div id='content'>
          <div class='container'>
          <div class='page-header'>
            <h1>Hard drive and RAM disk Comparison Report<small><em>Thursday, September 22, 2011</em></small></h1>
          </div>

          <p>This report was written in order to compare the performance of hard drives and RAM disks. I wrote a Bash script for test basic file operations implemented in our package building system. The work illustrates of the possibility to use RAM in order to accelerate the build process.</p>

          <h2>Hardware and Software specification</h2>
          
          <ul>
            <li><strong>OS:</strong> Red Hat Enterprise Linux Server release 6.0 (Santiago), Linux version 2.6.32-71.el6.x86_64</li>
            <li><strong>CPU:</strong> Intel® Xeon® Processor X5680 (12M Cache, 3.33 GHz, 6.40 GT/s Intel® QPI) x 2</li>
            <li><strong>Hard drive:</strong> Seagate Constellation ES ST3500514NS 500GB 7200 RPM 32MB Cache SATA 3.0Gb/s 3.5" Enterprise Internal Hard Drive -Bare Drive</li>
            <li><strong>RAM:</strong> 4GB DDR3 SDRAM PC3-10600 1333MHz CL9 x72 ECC Registered DIMM Memory - HYNIX HMT151R7TFR4C-H9 x 8</li>
          </ul>

          <h2>Bash Script Listing</h2>

          <pre>
            <span style='color:#696969; '>#!</span><span style='color:#007997; '>/bin/bash</span>

            function remove_files<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>local</span> path<span style='color:#808030; '>=</span><span style='color:#797997; '>$1</span>
            cd $path
            rm <span style='color:#800000; font-weight:bold; '>-f</span> file<span style='color:#808030; '>*</span>
            <span style='color:#800080; '>}</span>

            function create_files<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>local</span> path<span style='color:#808030; '>=</span><span style='color:#797997; '>$1</span>
            <span style='color:#800000; font-weight:bold; '>local</span> num<span style='color:#808030; '>=</span><span style='color:#797997; '>$2</span>
            <span style='color:#800000; font-weight:bold; '>local</span> size<span style='color:#808030; '>=</span><span style='color:#797997; '>$3</span>

            <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> $num<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800000; font-weight:bold; '>do</span>
            <span style='color:#808030; '>(</span> dd bs<span style='color:#808030; '>=</span>$size count<span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>=</span><span style='color:#800000; '>/</span><span style='color:#0000e6; '>dev</span><span style='color:#800000; '>/</span>zero of<span style='color:#808030; '>=</span>$path<span style='color:#808030; '>/</span>file<span style='color:#808030; '>-</span>$i <span style='color:#808030; '>)</span> <span style='color:#808030; '>></span><span style='color:#0000e6; '> </span><span style='color:#800000; '>/</span><span style='color:#0000e6; '>dev</span><span style='color:#800000; '>/</span>null <span style='color:#008c00; '>2</span><span style='color:#808030; '>></span><span style='color:#808030; '>&amp;</span><span style='color:#008c00; '>1</span>
            done
            <span style='color:#800080; '>}</span>

            function verify_files<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>local</span> path<span style='color:#808030; '>=</span><span style='color:#797997; '>$1</span>

            ls $path<span style='color:#808030; '>/</span>file<span style='color:#808030; '>-</span><span style='color:#808030; '>*</span> <span style='color:#808030; '>|</span> xargs md5sum <span style='color:#808030; '>></span><span style='color:#0000e6; '> </span><span style='color:#800000; '>/</span><span style='color:#0000e6; '>dev</span><span style='color:#800000; '>/</span>null
            <span style='color:#800080; '>}</span>

            function compress_files<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>local</span> path<span style='color:#808030; '>=</span><span style='color:#797997; '>$1</span>
            <span style='color:#800000; font-weight:bold; '>local</span> num<span style='color:#808030; '>=</span><span style='color:#797997; '>$2</span>
            <span style='color:#800000; font-weight:bold; '>local</span> speed<span style='color:#808030; '>=</span><span style='color:#797997; '>$3</span> <span style='color:#696969; '># 1 - fastest, 9 - slowest</span>

            <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> $num<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800000; font-weight:bold; '>do</span>
            gzip <span style='color:#808030; '>-</span>$speed <span style='color:#800000; font-weight:bold; '>-c</span> $path<span style='color:#808030; '>/</span>file<span style='color:#808030; '>-</span>$i <span style='color:#808030; '>></span> $path<span style='color:#808030; '>/</span>file<span style='color:#808030; '>-</span>$i<span style='color:#808030; '>-</span>$speed<span style='color:#808030; '>.</span>gz
            done
            <span style='color:#800080; '>}</span>

            path<span style='color:#808030; '>=</span><span style='color:#0000e6; '>'/work/ram'</span>
            num<span style='color:#808030; '>=</span><span style='color:#008c00; '>40000</span>
            size<span style='color:#808030; '>=</span>$<span style='color:#808030; '>[</span><span style='color:#008c00; '>1024</span><span style='color:#808030; '>]</span>

            echo <span style='color:#0000e6; '>"Number of files: "</span>$num
            echo <span style='color:#0000e6; '>"Size: "</span>$size
            echo <span style='color:#0000e6; '>"Path: "</span>$path
            echo <span style='color:#0000e6; '>""</span>

            start<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            remove_files $path
            end<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            diff<span style='color:#808030; '>=</span><span style='color:#797997; '>$(</span><span style='color:#808030; '>(</span>$end <span style='color:#808030; '>-</span> $start<span style='color:#808030; '>)</span><span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>)</span>
            echo <span style='color:#0000e6; '>"Removing: $diff seconds"</span>

            start<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            create_files $path $num $size
            end<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            diff<span style='color:#808030; '>=</span><span style='color:#797997; '>$(</span><span style='color:#808030; '>(</span>$end <span style='color:#808030; '>-</span> $start<span style='color:#808030; '>)</span><span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>)</span>
            echo <span style='color:#0000e6; '>"Creating: $diff seconds"</span>
            
            start<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            verify_files $path
            end<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            diff<span style='color:#808030; '>=</span><span style='color:#797997; '>$(</span><span style='color:#808030; '>(</span>$end <span style='color:#808030; '>-</span> $start<span style='color:#808030; '>)</span><span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>)</span>
            echo <span style='color:#0000e6; '>"Verifying: $diff seconds"</span>

            start<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            compress_files $path $num <span style='color:#008c00; '>1</span>
            end<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            diff<span style='color:#808030; '>=</span><span style='color:#797997; '>$(</span><span style='color:#808030; '>(</span>$end <span style='color:#808030; '>-</span> $start<span style='color:#808030; '>)</span><span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>)</span>
            echo <span style='color:#0000e6; '>"Compressing (fast): $diff seconds"</span>
            
            start<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            compress_files $path $num <span style='color:#008c00; '>9</span>
            end<span style='color:#808030; '>=</span>$<span style='color:#808030; '>(</span>date <span style='color:#808030; '>+</span>%s<span style='color:#808030; '>)</span>
            diff<span style='color:#808030; '>=</span><span style='color:#797997; '>$(</span><span style='color:#808030; '>(</span>$end <span style='color:#808030; '>-</span> $start<span style='color:#808030; '>)</span><span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>)</span>
            echo <span style='color:#0000e6; '>"Compressing (slow): $diff seconds"</span>
          </pre>

          <h2>Results<small>The results are present in seconds</small></h2>

          <h3>The results of the overall test</h3>

          <div class="panel panel-default">
            <div class="panel-heading">RAM Test for 2000 files</div>

            <table class="table">
              <thead>
                <tr>
                  <th>Size</th>
                  <th>1K</th>
                  <th>10K</th>
                  <th>100K</th>
                  <th>1M</th>
                  <th>10M</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>Removing</th>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                </tr>
                <tr>
                  <th>Creating</th>
                  <td>4</td>
                  <td>3</td>
                  <td>4</td>
                  <td>8</td>
                  <td>8</td>
                </tr>
                <tr>
                  <th>Verifying</th>
                  <td>0</td>
                  <td>0</td>
                  <td>1</td>
                  <td>4</td>
                  <td>4</td>
                </tr>
                <tr>
                  <th>Compressing (fast)</th>
                  <td>2</td>
                  <td>3</td>
                  <td>4</td>
                  <td>14</td>
                  <td>14</td>
                </tr>
                <tr>
                  <th>Compressing (slow)</th>
                  <td>2</td>
                  <td>2</td>
                  <td>5</td>
                  <td>24</td>
                  <td>24</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Hard Drive Test for 2000 files</div>

            <table class="table">
              <thead>
                <tr>
                  <th>Size</th>
                  <th>1K</th>
                  <th>10K</th>
                  <th>100K</th>
                  <th>1M</th>
                  <th>10M</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>Removing</th>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>1</td>
                  <td>6</td>
                </tr>
                <tr>
                  <th>Creating</th>
                  <td>3</td>
                  <td>3</td>
                  <td>3</td>
                  <td>20</td>
                  <td>285</td>
                </tr>
                <tr>
                  <th>Verifying</th>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>25</td>
                  <td>233</td>
                </tr>
                <tr>
                  <th>Compressing (fast)</th>
                  <td>2</td>
                  <td>2</td>
                  <td>3</td>
                  <td>18</td>
                  <td>215</td>
                </tr>
                <tr>
                  <th>Compressing (slow)</th>
                  <td>1</td>
                  <td>2</td>
                  <td>4</td>
                  <td>27</td>
                  <td>211</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3>Discrete file operations test</h3>

          <div class="panel panel-default">
            <div class="panel-heading">RAM Test for files - size 1024 bytes</div>

            <table class="table">
              <thead>
                <tr>
                  <th>Number of files</th>
                  <th>2000</th>
                  <th>20 000</th>
                  <th>40 000</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>Removing</th>
                  <td>0</td>
                  <td>0</td>
                  <td>4</td>
                </tr>
                <tr>
                  <th>Creating</th>
                  <td>4</td>
                  <td>35</td>
                  <td>100</td>
                </tr>
                <tr>
                  <th>Verifying</th>
                  <td>0</td>
                  <td>0</td>
                  <td>2</td>
                </tr>
                <tr>
                  <th>Compressing (fast)</th>
                  <td>2</td>
                  <td>32</td>
                  <td>132</td>
                </tr>
                <tr>
                  <th>Compressing (slow)</th>
                  <td>2</td>
                  <td>39</td>
                  <td>225</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Hard Drive Test for files - size 1024 bytes</div>

            <table class="table">
              <thead>
                <tr>
                  <th>Number of files</th>
                  <th>2000</th>
                  <th>20 000</th>
                  <th>40 000</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>Removing</th>
                  <td>33</td>
                  <td>0</td>
                  <td>1</td>
                </tr>
                <tr>
                  <th>Creating</th>
                  <td>2</td>
                  <td>30</td>
                  <td>65</td>
                </tr>
                <tr>
                  <th>Verifying</th>
                  <td>0</td>
                  <td>1</td>
                  <td>2</td>
                </tr>
                <tr>
                  <th>Compressing (fast)</th>
                  <td>2</td>
                  <td>20</td>
                  <td>54</td>
                </tr>
                <tr>
                  <th>Compressing (slow)</th>
                  <td>2</td>
                  <td>20</td>
                  <td>55</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h2>Conclusion</h2>

          <p>RAM disk usage is beneficial for files larger than 100 kilobytes. In another case, the speed of hard drive operations is not inferior to speed of operations in memory.</p>
        </div>
        </div>
        <div id='footer'>
          <div class='container'>
    <footer>
        <hr class='footer-divider' />

        <ul class='piped-links pull-right'>
            <li class='first piped-links-short'><a href='../resume.html'>About</a></li>
            <li class='first piped-links-long'><a href='../resume.html'>About Andrey Pudov</a></li>
            <li><a href='../contact.html'>Contact</a></li>
        </ul>

        <ul class='piped-links'>
            <p class='piped-links-long'>Copyright &#169; 2015 Andrey Pudov. All rights reserved.</p>
        </ul>

        <p class='piped-links-short'>&#169; 2015 Andrey Pudov. All rights reserved.</p>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src='../libraries/jquery/jquery-1.11.3.min.js'></script>
    <!-- <script src='../libraries/jquery/jquery.validate.min.js'></script> -->

    <!-- <script src='../libraries/bootstrap/js/bootstrap.min.js'></script> -->

    <script src='../libraries/bootstrap/js/collapse.js' ></script>
    <script src='../libraries/bootstrap/js/dropdown.js' ></script>
    <script src='../libraries/bootstrap/js/transition.js' ></script>

    <!-- web page specific scripts declaration -->
    

    <!-- common on init functions -->
    <script src='../scripts/init.js'></script>
</div>
                 
        </div>
      </div>
    </body>
</html>
