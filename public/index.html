<!DOCTYPE html>
<html prefix='og: http://ogp.me/ns#'>
  <head>
    <title>Andrey Pudov</title>

    <meta charset='utf-8' />

    <meta name='viewport'    content='width=device-width, initial-scale=1.0' />
    <meta name='description' content='Official Andrey Pudov website featuring Andrey Pudov news, photo albums and more.' data-rh='true' />
    <meta name='author'      content='Andrey Pudov' />

    <link rel='icon'             href='%PUBLIC_URL%/favicon/favicon.ico' />
    <link rel='apple-touch-icon' href='%PUBLIC_URL%/favicon/apple-touch-icon.png' sizes='180x180' type='image/png' >
    <link rel='icon'             href='%PUBLIC_URL%/favicon/favicon-32x32.png'    sizes='32x32'   type='image/png' >
    <link rel='icon'             href='%PUBLIC_URL%/favicon/favicon-16x16.png'    sizes='16x16'   type='image/png' >
    <link rel='manifest'         href='%PUBLIC_URL%/manifest.json' />

    <script>
      /* configuring the language */
      const supportedLanguagesList = ['en', 'ru'];
      const defaultLanguage = supportedLanguagesList[0];

      const getPathWithoutLanguage = (pathname) =>
        (pathname.charAt(3) === '/') ? pathname.substring(3) : pathname;

      const getLanguagesSupportedByBrowser = () =>
        (navigator.languages.map((language) => language.substring(0, 2)))
        .filter((item, index, arr) => arr.indexOf(item) === index);

      requestedLanguage = () => window.location.pathname.split('/')[1] || '';
      supportedLanguages = () => getLanguagesSupportedByBrowser().filter((language) => supportedLanguagesList.includes(language));
      applyLanguage = (requestedLanguage, supportedLanguages) => {
          const requiredLanguage = supportedLanguages.includes(requestedLanguage) ? requestedLanguage : defaultLanguage;
          const newPathname = `/${requiredLanguage}${getPathWithoutLanguage(window.location.pathname)}`;

          if (requiredLanguage !== requestedLanguage) {
            window.location.replace(newPathname);
          }
        };

      applyLanguage(requestedLanguage(), supportedLanguages())
    </script>
    <style>
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #000 !important;
        }
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id='root'></div>
  </body>
</html>
